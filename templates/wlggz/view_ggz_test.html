{% extends "wlggz/base.html" %}

{% load i18n %}

{% block content %}
{% load custom_date %}
{% load wlprofile %}

{% include "django_messages/inlines/navigation.html" %}

<br />
<br />

{% if ggzauth.user %}
    <div class="ggz_item">
        <h3 class="title">{% trans "GGZ results for" %} {{ ggzauth.user.username }}</h3>
            <table class="bottom_line" width="100%">
                <tr><td class="ggz_stats">Last ggz login:</td><td> {{ ggzauth.lastlogin }}</td></tr>
                <tr><td class="ggz_stats">Ranking:</td><td> {{ ggzstats.ranking }}</td></tr>
                <tr><td class="ggz_stats">Rating:</td><td> {{ ggzstats.rating|floatformat }}</td></tr>
                <tr><td class="ggz_stats">wins:</td><td> {{ ggzstats.wins }}</td></tr>
                <tr><td class="ggz_stats">losses:</td><td> {{ ggzstats.losses }}</td></tr>
            </table>
    </div>
    <br />
    <br />

    <div class="ggz_item">
        <h3 class="title">Last 10 matches of {{ ggzauth.user.username }}</h3>
        {% if ggzmatches %}
	    <table width="100%" cellspacing="1" class="text">
            <tr>
                <td class="ggz_date">Date</td>
                <td class="ggz_winner">Winner</td>
                <td class="ggz_vs">Participants</td>
            </tr>
            {% for match in ggzmatches %}
            <tr>
                <td class="{% cycle "odd" "even" %}">{{ match.match.date_date  }}</td>
                <td class="{% cycle "odd" "even" %}">{{ match.match.winner|user_link_ggz }}</td>
                <td class="{% cycle "odd" "even" %}">
                    {% for player in match.match.wlggz_matchplayers.all %}
                        {{ player.handle|user_link_ggz }} 
                    {% endfor %}
                </td class="{% cycle "odd" "even" %}">
            </tr>
            {% endfor %}
        </table>
        {% else %}
        <table width="100%" class="bottom_line">
            <tr>
                <td class="error">
                    <br />
                    <b>User has not participated in any matches</b>
                    <br />
                    <br />
                </td>
            </tr>
        </table>
        {% endif %}
    </div>
    <br />
    <br />
    <div class="ggz_item">
        <h3 class="title">Last 10 matches {{ ggzauth.user.username }} won</h3>
        {% if ggzwonmatches %}
        <table width="100%" cellspacing="1" class="text">
            <tr>
                <td class="ggz_date">Date</td>
                <td class="ggz_winner">Winner</td>
                <td class="ggz_vs">Participants</td>
            </tr>
            {% for match in ggzwonmatches %}
            <tr>
                <td class="{% cycle "odd" "even" %}">{{ match.date_date  }}</td>
                <td class="{% cycle "odd" "even" %}">{{ match.winner|user_link_ggz }}</td>
                <td class="{% cycle "odd" "even" %}">
                    {% for player in match.wlggz_matchplayers.all %}
                        {{ player.handle|user_link_ggz }}
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
        <table width="100%" class="bottom_line">
            <tr>
                <td class="error">
                    <br />
                    <b>User has won no matches</b>
                    <br />
                    <br />
                </td>
            </tr>
        </table>
        {% endif %}
	</div>
{% else %}
    <div class="ggz_item">
        <h3 class="title">{% trans "GGZ results for" %} {{ ggzauth.user.username }}</h3>
        <table width="100%" class="bottom_line">
            <tr>
                <td class="error">
                    <br />
                    <b>User does not exist or has no ggz account
                    <br />
                    <br />
                </td>
            </tr>
        </table>
    </div>
{% endif %}

{% endblock %}
